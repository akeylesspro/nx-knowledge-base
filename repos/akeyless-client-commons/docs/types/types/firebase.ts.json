{
  "repo": {
    "name": "akeyless-client-commons",
    "source_default_branch": "main"
  },
  "file_name": "firebase.ts",
  "source": {
    "file_path": "types/types/firebase.ts",
    "commit_sha": "844185137ce1390e1c325518f954aaf0e22f09ff",
    "generated_at_iso": "2026-02-15T11:42:40+02:00",
    "language": "ts",
    "framework_tags": [
      "firebase"
    ],
    "link_to_github": "https://github.com/akeyless-client-commons/blob/844185137ce1390e1c325518f954aaf0e22f09ff/src/types/types/firebase.ts",
    "link_to_nx_kb": "/repos/akeyless-client-commons/docs/types/types/firebase.ts.json"
  },
  "summary": {
    "purpose": "Firebase helper type definitions.",
    "problem_solved": "Provides type safety for the snapshot listener callbacks, configurations, and Firestore query conditions."
  },
  "dependencies": {
    "external": [
      {
        "name": "akeyless-types-commons",
        "kind": "dev",
        "why_used": "Base types."
      },
      {
        "name": "firebase/firestore",
        "kind": "runtime",
        "why_used": "Firestore types (Unsubscribe, WhereFilterOp)."
      }
    ],
    "internal": []
  },
  "exports": [
    {
      "name": "OnSnapshotCallback",
      "kind": "type",
      "description_one_line": "Callback signature for snapshot updates.",
      "symbol_id": "OnSnapshotCallback"
    },
    {
      "name": "OnSnapshotParsers",
      "kind": "interface",
      "description_one_line": "Hooks for different snapshot events (first time, add, modify, remove).",
      "symbol_id": "OnSnapshotParsers"
    },
    {
      "name": "WhereCondition",
      "kind": "interface",
      "description_one_line": "Structure for a Firestore 'where' clause.",
      "symbol_id": "WhereCondition"
    },
    {
      "name": "OnSnapshotConfig",
      "kind": "interface",
      "description_one_line": "Configuration for collection listeners.",
      "symbol_id": "OnSnapshotConfig"
    },
    {
      "name": "SnapshotResult",
      "kind": "interface",
      "description_one_line": "Return value of a snapshot subscription.",
      "symbol_id": "SnapshotResult"
    },
    {
      "name": "Snapshot",
      "kind": "type",
      "description_one_line": "Function signature for subscribing to collection changes.",
      "symbol_id": "Snapshot"
    },
    {
      "name": "SnapshotDocument",
      "kind": "type",
      "description_one_line": "Function signature for subscribing to single document changes.",
      "symbol_id": "SnapshotDocument"
    }
  ],
  "symbols": [
    {
      "symbol_id": "OnSnapshotConfig",
      "name": "OnSnapshotConfig",
      "kind": "interface",
      "description_one_line": "Configuration for subscribing to Firestore collection changes.",
      "details": {
        "what_it_does": "Extends OnSnapshotParsers to include collection name, Firestore query conditions (where clauses), ordering (sort), parsing options, and subscriber type (cache or database). Supports multiple parsers for handling different snapshot events on the same collection."
      },
      "locations": {
        "source_line_start": 17,
        "source_line_end": 24,
        "github_permalink": "https://github.com/akeylesspro/akeyless-client-commons/blob/844185137ce1390e1c325518f954aaf0e22f09ff/src/types/types/firebase.ts#L17-L24",
        "nx_kb_anchor": "OnSnapshotConfig"
      },
      "examples": {
        "minimal_correct": {
          "title": "Basic collection listener config",
          "code": "const config: OnSnapshotConfig = {\n  collectionName: 'users',\n  onFirstTime: (docs) => console.log('Initial load:', docs),\n  onAdd: (docs) => console.log('New doc:', docs),\n  onModify: (docs) => console.log('Doc updated:', docs),\n  onRemove: (docs) => console.log('Doc deleted:', docs)\n};"
        },
        "extensive_correct": {
          "title": "Collection listener with conditions and sorting",
          "code": "const config: OnSnapshotConfig = {\n  collectionName: 'vehicles',\n  conditions: [\n    { field_name: 'status', operator: '==', value: 'active' },\n    { field_name: 'type', operator: 'in', value: ['car', 'truck'] }\n  ],\n  orderBy: [\n    { fieldName: 'createdAt', direction: 'desc' },\n    { fieldName: 'name', direction: 'asc' }\n  ],\n  parseAs: 'array',\n  subscribeTo: 'db',\n  onFirstTime: (docs) => setInitialData(docs),\n  onAdd: (docs) => addNewRow(docs[0])\n};"
        }
      }
    },
    {
      "symbol_id": "OnSnapshotCallback",
      "name": "OnSnapshotCallback",
      "kind": "type",
      "description_one_line": "Callback function signature for Firestore snapshot events.",
      "details": {
        "what_it_does": "Function signature for handling snapshot events (onFirstTime, onAdd, onModify, onRemove). Receives array of documents from the snapshot and the listener configuration.",
        "type_definition": "(documents: any[], config: OnSnapshotConfig) => void"
      },
      "locations": {
        "source_line_start": 4,
        "source_line_end": 4,
        "github_permalink": "https://github.com/akeylesspro/akeyless-client-commons/blob/844185137ce1390e1c325518f954aaf0e22f09ff/src/types/types/firebase.ts#L4",
        "nx_kb_anchor": "OnSnapshotCallback"
      },
      "examples": {
        "minimal_correct": {
          "title": "Callback function implementation",
          "code": "const onAddCallback: OnSnapshotCallback = (documents, config) => {\n  console.log(`Added ${documents.length} documents to ${config.collectionName}`);\n};"
        },
        "extensive_correct": {
          "title": "Multiple callback handlers",
          "code": "const onFirstTime: OnSnapshotCallback = (documents) => {\n  setTableData(documents);\n  setLoading(false);\n};\n\nconst onAdd: OnSnapshotCallback = (documents) => {\n  setTableData(prev => [...prev, ...documents]);\n};\n\nconst onModify: OnSnapshotCallback = (documents) => {\n  setTableData(prev => prev.map(d => documents.find(doc => doc.id === d.id) || d));\n};\n\nconst onRemove: OnSnapshotCallback = (documents) => {\n  setTableData(prev => prev.filter(d => !documents.find(doc => doc.id === d.id)));\n};"
        }
      }
    },
    {
      "symbol_id": "OnSnapshotParsers",
      "name": "OnSnapshotParsers",
      "kind": "interface",
      "description_one_line": "Optional event handlers for different Firestore snapshot change types.",
      "details": {
        "what_it_does": "Interface providing optional callback hooks for different snapshot events: onFirstTime (initial load), onAdd (new documents), onModify (updated documents), onRemove (deleted documents). All callbacks are optional (OnSnapshotCallback type is optional)."
      },
      "locations": {
        "source_line_start": 6,
        "source_line_end": 11,
        "github_permalink": "https://github.com/akeylesspro/akeyless-client-commons/blob/844185137ce1390e1c325518f954aaf0e22f09ff/src/types/types/firebase.ts#L6-L11",
        "nx_kb_anchor": "OnSnapshotParsers"
      },
      "examples": {
        "minimal_correct": {
          "title": "Basic parser setup",
          "code": "const parsers: OnSnapshotParsers = {\n  onFirstTime: (docs) => console.log('Loaded', docs),\n  onAdd: (docs) => console.log('Added', docs),\n  onModify: (docs) => console.log('Modified', docs),\n  onRemove: (docs) => console.log('Removed', docs)\n};"
        },
        "extensive_correct": {
          "title": "Selective event handling",
          "code": "const parsers: OnSnapshotParsers = {\n  onFirstTime: async (docs) => {\n    const processed = await processDocuments(docs);\n    setData(processed);\n  },\n  onAdd: (docs) => {\n    notification.success(`${docs.length} document(s) added`);\n  }\n  // onModify and onRemove not needed\n};"
        }
      }
    },
    {
      "symbol_id": "WhereCondition",
      "name": "WhereCondition",
      "kind": "interface",
      "description_one_line": "Firestore query filter condition (where clause).",
      "details": {
        "what_it_does": "Represents a single Firestore 'where' filter clause with field name, operator, and value. Operators come from Firebase's WhereFilterOp (==, <, <=, >, >=, !=, in, array-contains, array-contains-any)."
      },
      "locations": {
        "source_line_start": 12,
        "source_line_end": 16,
        "github_permalink": "https://github.com/akeylesspro/akeyless-client-commons/blob/844185137ce1390e1c325518f954aaf0e22f09ff/src/types/types/firebase.ts#L12-L16",
        "nx_kb_anchor": "WhereCondition"
      },
      "examples": {
        "minimal_correct": {
          "title": "Basic where clause",
          "code": "const condition: WhereCondition = {\n  field_name: 'status',\n  operator: '==',\n  value: 'active'\n};"
        },
        "extensive_correct": {
          "title": "Multiple condition types",
          "code": "const conditions: WhereCondition[] = [\n  { field_name: 'age', operator: '>=', value: 18 },\n  { field_name: 'country', operator: 'in', value: ['US', 'CA', 'MX'] },\n  { field_name: 'tags', operator: 'array-contains', value: 'verified' },\n  { field_name: 'score', operator: '!=', value: 0 }\n];"
        }
      }
    },
    {
      "symbol_id": "SnapshotResult",
      "name": "SnapshotResult",
      "kind": "interface",
      "description_one_line": "Return value from snapshot listener subscription.",
      "details": {
        "what_it_does": "Contains a Promise that resolves when initial load completes and an Unsubscribe function to stop listening to snapshot changes."
      },
      "locations": {
        "source_line_start": 32,
        "source_line_end": 35,
        "github_permalink": "https://github.com/akeylesspro/akeyless-client-commons/blob/844185137ce1390e1c325518f954aaf0e22f09ff/src/types/types/firebase.ts#L32-L35",
        "nx_kb_anchor": "SnapshotResult"
      },
      "examples": {
        "minimal_correct": {
          "title": "Using snapshot result",
          "code": "const result = snapshot(config, ['users']);\nawait result.promise; // Wait for initial load\nconst unsubscribe = result.unsubscribe; // Store for cleanup"
        },
        "extensive_correct": {
          "title": "With cleanup on unmount",
          "code": "useEffect(() => {\n  const result = snapshot(config, ['users']);\n  \n  result.promise.then(() => {\n    console.log('Data loaded');\n  });\n  \n  return () => {\n    result.unsubscribe(); // Cleanup on unmount\n  };\n}, []);"
        }
      }
    },
    {
      "symbol_id": "Snapshot",
      "name": "Snapshot",
      "kind": "type",
      "description_one_line": "Function type for subscribing to Firestore collection changes.",
      "details": {
        "what_it_does": "Function type that creates a listener on a Firestore collection. Returns a SnapshotResult with promise (resolves when initial load completes) and unsubscribe function. Takes config, array of snapshot IDs for deduplication, and optional settings.",
        "type_definition": "(config: OnSnapshotConfig, snapshotsFirstTime: string[], settings?: { disableLogs?: boolean }) => SnapshotResult"
      },
      "locations": {
        "source_line_start": 37,
        "source_line_end": 37,
        "github_permalink": "https://github.com/akeylesspro/akeyless-client-commons/blob/844185137ce1390e1c325518f954aaf0e22f09ff/src/types/types/firebase.ts#L37",
        "nx_kb_anchor": "Snapshot"
      },
      "examples": {
        "minimal_correct": {
          "title": "Basic snapshot subscription",
          "code": "const { promise, unsubscribe } = snapshot({\n  collectionName: 'users',\n  onFirstTime: (docs) => setUsers(docs)\n}, ['users-listener']);"
        },
        "extensive_correct": {
          "title": "Collection listener with all options",
          "code": "const { promise, unsubscribe } = snapshot({\n  collectionName: 'vehicles',\n  conditions: [{ field_name: 'status', operator: '==', value: 'active' }],\n  orderBy: [{ fieldName: 'createdAt', direction: 'desc' }],\n  parseAs: 'array',\n  subscribeTo: 'db',\n  onFirstTime: handleInitialLoad,\n  onAdd: handleNewVehicle,\n  onModify: handleVehicleUpdate,\n  onRemove: handleVehicleDelete\n}, ['vehicles-listener'], { disableLogs: true });"
        }
      }
    },
    {
      "symbol_id": "SnapshotDocument",
      "name": "SnapshotDocument",
      "kind": "type",
      "description_one_line": "Function type for subscribing to single Firestore document changes.",
      "details": {
        "what_it_does": "Function type that creates a listener on a specific Firestore document by ID. Similar to Snapshot but uses OnSnapshotConfigDocument which includes documentId and omits onAdd (documents don't 'add' to single doc listener). Returns SnapshotResult with promise and unsubscribe.",
        "type_definition": "(config: OnSnapshotConfigDocument, snapshotsFirstTime: string[]) => SnapshotResult"
      },
      "locations": {
        "source_line_start": 39,
        "source_line_end": 39,
        "github_permalink": "https://github.com/akeylesspro/akeyless-client-commons/blob/844185137ce1390e1c325518f954aaf0e22f09ff/src/types/types/firebase.ts#L39",
        "nx_kb_anchor": "SnapshotDocument"
      },
      "examples": {
        "minimal_correct": {
          "title": "Single document listener",
          "code": "const { promise, unsubscribe } = snapshotDocument({\n  collectionName: 'users',\n  documentId: 'user-123',\n  onFirstTime: (doc) => setUser(doc[0])\n}, ['user-123-listener']);"
        },
        "extensive_correct": {
          "title": "Document listener with all options",
          "code": "const { promise, unsubscribe } = snapshotDocument({\n  collectionName: 'vehicles',\n  documentId: 'vehicle-456',\n  conditions: [{ field_name: 'status', operator: '==', value: 'active' }],\n  onFirstTime: (doc) => {\n    setVehicle(doc[0]);\n    setLoading(false);\n  },\n  onModify: (doc) => {\n    notification.info('Vehicle updated');\n    setVehicle(doc[0]);\n  },\n  onRemove: () => {\n    notification.warning('Vehicle deleted');\n    navigate('/vehicles');\n  }\n}, ['vehicle-456-listener']);"
        }
      }
    }
  ],
  "quality": {
    "generation_confidence": "high"
  }
}