{
  "repo": {
    "name": "akeyless-client-commons",
    "source_default_branch": "main"
  },
  "file_name": "InternationalPhonePicker.tsx",
  "source": {
    "file_path": "components/forms/ModularForm/InternationalPhonePicker.tsx",
    "commit_sha": "844185137ce1390e1c325518f954aaf0e22f09ff",
    "generated_at_iso": "2026-02-16T19:00:00.000Z",
    "language": "tsx",
    "framework_tags": [
      "react",
      "form-input",
      "phone-number",
      "international"
    ],
    "link_to_github": "https://github.com/akeylesspro/akeyless-client-commons/blob/844185137ce1390e1c325518f954aaf0e22f09ff/src/components/forms/ModularForm/InternationalPhonePicker.tsx",
    "link_to_nx_kb": "/repos/akeyless-client-commons/docs/components/forms/ModularForm/InternationalPhonePicker.json"
  },
  "summary": {
    "purpose": "International phone number input component with country selection, flag display, automatic formatting, and integration with ModularForm system for forms requiring global phone number input.",
    "problem_solved": "Provides a validated phone number input field with country flag selector, supporting 190+ countries with automatic formatting, country code display, keyboard navigation, and optional label rendering for form integration. Handles both controlled (via setPhoneValue callback) and uncontrolled (internal state) value management."
  },
  "dependencies": {
    "external": [
      {
        "name": "react",
        "kind": "runtime",
        "why_used": "Core hooks (forwardRef, useEffect, useMemo, useRef, useState) and component composition."
      },
      {
        "name": "react-phone-number-input",
        "kind": "runtime",
        "why_used": "Core phone number validation, formatting, and country metadata. Provides RPNInput component, getCountryCallingCode utility, Country type, and flag data."
      },
      {
        "name": "lucide-react",
        "kind": "runtime",
        "why_used": "ChevronDown and Phone icons for country selector and fallback flag display."
      }
    ],
    "internal": [
      {
        "import_path": "@/components/ui/input",
        "resolved_file_path": "components/ui/input.tsx",
        "why_used": "Styled Input component wrapper for phone number text input field.",
        "link_to_nx_kb": "/repos/akeyless-client-commons/docs/components/ui/input.json",
        "link_to_github": "https://github.com/akeylesspro/akeyless-client-commons/blob/844185137ce1390e1c325518f954aaf0e22f09ff/src/components/ui/input.tsx"
      },
      {
        "import_path": "./formElements",
        "resolved_file_path": "components/forms/ModularForm/formElements.tsx",
        "why_used": "ElementLabel component for optional form label rendering.",
        "link_to_nx_kb": "/repos/akeyless-client-commons/docs/components/forms/ModularForm/formElements.json",
        "link_to_github": "https://github.com/akeylesspro/akeyless-client-commons/blob/844185137ce1390e1c325518f954aaf0e22f09ff/src/components/forms/ModularForm/formElements.tsx"
      },
      {
        "import_path": "@/lib/utils",
        "resolved_file_path": "lib/utils.ts",
        "why_used": "cn utility for conditional CSS class merging.",
        "link_to_nx_kb": "/repos/akeyless-client-commons/docs/lib/utils.json",
        "link_to_github": "https://github.com/akeylesspro/akeyless-client-commons/blob/844185137ce1390e1c325518f954aaf0e22f09ff/src/lib/utils.ts"
      }
    ]
  },
  "exports": [
    {
      "name": "InternationalPhonePicker",
      "kind": "component",
      "description_one_line": "Default export of international phone number input with country selector and flag display.",
      "symbol_id": "InternationalPhonePicker"
    }
  ],
  "symbols": [
    {
      "symbol_id": "InternationalPhonePicker",
      "name": "InternationalPhonePicker",
      "kind": "component",
      "description_one_line": "International phone number input with country selection, automatic formatting, and ModularForm integration.",
      "signature": {
        "params": [
          {
            "name": "phoneValue",
            "type": "string",
            "required": false,
            "description": "Controlled phone value. If setPhoneValue is provided, external state controls the value. Defaults to empty string."
          },
          {
            "name": "setPhoneValue",
            "type": "((value: string) => void) | Dispatch<SetStateAction<string>>",
            "required": false,
            "description": "Callback to update phone value externally. Can be a state setter from useState or custom callback. If not provided, uses internal state."
          },
          {
            "name": "defaultValue",
            "type": "string",
            "required": false,
            "description": "Initial phone value to set on mount. Applied to both controlled and uncontrolled modes."
          },
          {
            "name": "defaultCountry",
            "type": "RPNInput.Country",
            "required": false,
            "description": "Default ISO country code (e.g., 'US', 'IL', 'GB'). Defaults to 'IL' (Israel)."
          },
          {
            "name": "countries",
            "type": "RPNInput.Country[]",
            "required": false,
            "description": "Array of country codes to include in the selector. Merged with default countries (US, IL, NG, TH). If empty, uses defaults. Defaults to empty array."
          },
          {
            "name": "placeholder",
            "type": "string",
            "required": false,
            "description": "Placeholder text shown in phone input field. Defaults to empty string."
          },
          {
            "name": "name",
            "type": "string",
            "required": false,
            "description": "HTML input name attribute for form submission. Applied to hidden input storing phone value."
          },
          {
            "name": "labelContent",
            "type": "string | ReactNode",
            "required": false,
            "description": "Optional label text displayed beside phone input. If provided, ElementLabel is rendered."
          },
          {
            "name": "required",
            "type": "boolean",
            "required": false,
            "description": "If true, shows red asterisk on label. Only relevant if labelContent is provided."
          },
          {
            "name": "className",
            "type": "string",
            "required": false,
            "description": "CSS classes for the RPNInput wrapper element (outer container)."
          },
          {
            "name": "containerClassName",
            "type": "string",
            "required": false,
            "description": "CSS classes for the main component container (includes label area if labelContent provided)."
          },
          {
            "name": "inputClassName",
            "type": "string",
            "required": false,
            "description": "CSS classes for the text input field (phone number entry area)."
          },
          {
            "name": "flagContainerClassName",
            "type": "string",
            "required": false,
            "description": "CSS classes for the country flag/selector dropdown button area."
          },
          {
            "name": "labelClassName",
            "type": "string",
            "required": false,
            "description": "CSS classes for the label element."
          },
          {
            "name": "labelsCommonClassName",
            "type": "string",
            "required": false,
            "description": "Common CSS classes applied to the label from parent context."
          },
          {
            "name": "elementsCommonClassName",
            "type": "string",
            "required": false,
            "description": "Common CSS classes applied to the element from parent context."
          },
          {
            "name": "style",
            "type": "React.CSSProperties",
            "required": false,
            "description": "Inline CSS styles for the phone input field."
          },
          {
            "name": "direction",
            "type": "Direction",
            "required": false,
            "description": "Text direction ('rtl' for right-to-left, 'ltr' for left-to-right). Applied to outer container. Phone input always renders LTR internally."
          },
          {
            "name": "defaultFocus",
            "type": "boolean",
            "required": false,
            "description": "If true, automatically focuses the phone input field on mount. Defaults to true."
          },
          {
            "name": "disabled",
            "type": "boolean",
            "required": false,
            "description": "If true, disables both country selector and phone input field."
          },
          {
            "name": "onEnter",
            "type": "() => void",
            "required": false,
            "description": "Optional callback fired when user presses Enter key in phone input field."
          },
          {
            "name": "minLength",
            "type": "number",
            "required": false,
            "description": "Minimum phone number length (validation hint, not enforced by component)."
          }
        ],
        "returns": {
          "type": "JSX.Element",
          "description": "Form wrapper with optional label, flag selector dropdown, and phone input field with hidden submission input."
        }
      },
      "details": {
        "what_it_does": "Renders an international phone number input using react-phone-number-input (RPNInput) library. Features include: customizable country list (US, IL, NG, TH default), country flag display with dropdown selector, automatic phone number formatting based on selected country, optional label rendering via ElementLabel component, keyboard Enter support with custom callback, both controlled (setPhoneValue) and uncontrolled (internal state) value modes, and a hidden input for form submission. Phone input always renders left-to-right regardless of direction prop. Merges provided countries with default countries. Supports RTL containers with LTR phone input.",
        "rendered_ui_description": "Horizontal flex container (RTL/LTR based on direction prop) containing optional label on the start side and a combined phone input widget on the flex-expanding end. The phone input widget shows a country flag selector button on the left (displays country flag and down chevron, opens dropdown on click with searchable country list) and a phone number text input field on the right. Input has gray border styling. All text rendering is left-to-right for proper phone number display."
      },
      "locations": {
        "source_line_start": 11,
        "source_line_end": 100,
        "github_permalink": "https://github.com/akeylesspro/akeyless-client-commons/blob/844185137ce1390e1c325518f954aaf0e22f09ff/src/components/forms/ModularForm/InternationalPhonePicker.tsx#L11-L100",
        "nx_kb_anchor": "#InternationalPhonePicker"
      },
      "examples": {
        "minimal_correct": {
          "title": "Basic international phone input without label",
          "code": "import { useState } from 'react';\nimport InternationalPhonePicker from '@/components/forms/ModularForm/InternationalPhonePicker';\n\nconst PhoneForm = () => {\n  const [phone, setPhone] = useState('');\n\n  return (\n    <InternationalPhonePicker\n      phoneValue={phone}\n      setPhoneValue={setPhone}\n      defaultCountry=\"US\"\n      placeholder=\"Enter phone number\"\n    />\n  );\n};"
        },
        "extensive_correct": {
          "title": "Comprehensive phone input with label, validation, and form integration",
          "code": "import { useState } from 'react';\nimport InternationalPhonePicker from '@/components/forms/ModularForm/InternationalPhonePicker';\n\nconst ContactForm = () => {\n  const [phone, setPhone] = useState('');\n  const [country, setCountry] = useState<string>('US');\n  const [isValid, setIsValid] = useState(false);\n\n  const handlePhoneChange = (value: string) => {\n    setPhone(value);\n    // Validate: must have at least 10 digits\n    const digitsOnly = value.replace(/\\D/g, '');\n    setIsValid(digitsOnly.length >= 10);\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (isValid) {\n      console.log('Submitting phone:', phone, 'Country:', country);\n      // Submit to server\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\n      <InternationalPhonePicker\n        phoneValue={phone}\n        setPhoneValue={handlePhoneChange}\n        name=\"contactPhone\"\n        labelContent=\"Contact Phone Number\"\n        required={true}\n        defaultCountry=\"US\"\n        countries={['US', 'CA', 'MX', 'GB', 'AU', 'NZ', 'IL', 'JP', 'SG']}\n        placeholder=\"(555) 123-4567\"\n        direction=\"ltr\"\n        defaultFocus={true}\n        onEnter={() => {\n          if (isValid) handleSubmit({ preventDefault: () => {} } as React.FormEvent);\n        }}\n        inputClassName=\"text-lg\"\n        containerClassName=\"bg-gray-50 p-3 rounded-lg\"\n      />\n      <div className=\"flex items-center gap-2\">\n        <span className={isValid ? 'text-green-600' : 'text-red-600'}>\n          {isValid ? '✓ Valid' : '✗ Invalid (min 10 digits)'}\n        </span>\n      </div>\n      <button\n        type=\"submit\"\n        disabled={!isValid}\n        className=\"px-4 py-2 bg-blue-600 text-white rounded disabled:opacity-50\"\n      >\n        Submit\n      </button>\n    </form>\n  );\n};"
        },
        "incorrect": {
          "title": "Incorrect: Attempting to control value without setting external state updater",
          "code": "// Problem: phoneValue prop ignored because setPhoneValue not provided\nconst BadPhoneInput = () => {\n  const [phone, setPhone] = useState('+1 555 123 4567');\n\n  return (\n    <InternationalPhonePicker\n      phoneValue={phone}  // Provided but ignored!\n      setPhoneValue={undefined}  // No updater, uses internal state\n    />\n  );\n};\n// Result: Value doesn't update when external phone state changes. Component uses internal state instead.",
          "why_incorrect": "InternationalPhonePicker checks for setPhoneValue callback. If not provided, it uses internal state regardless of phoneValue prop. Always provide setPhoneValue callback to maintain controlled component pattern. Otherwise, use only defaultValue for uncontrolled initialization."
        }
      }
    }
  ],
  "quality": {
    "generation_confidence": "high",
    "known_gaps": []
  }
}