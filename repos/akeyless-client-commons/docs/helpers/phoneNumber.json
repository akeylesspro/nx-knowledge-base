{
  "repo": {
    "name": "akeyless-client-commons",
    "source_default_branch": "main"
  },
  "file_name": "phoneNumber.ts",
  "source": {
    "file_path": "helpers/phoneNumber.ts",
    "commit_sha": "844185137ce1390e1c325518f954aaf0e22f09ff",
    "generated_at_iso": "2026-02-15T11:42:40+02:00",
    "language": "ts",
    "framework_tags": [
      "libphonenumber-js"
    ],
    "link_to_github": "https://github.com/akeyless-client-commons/blob/844185137ce1390e1c325518f954aaf0e22f09ff/src/helpers/phoneNumber.ts",
    "link_to_nx_kb": "repos/akeyless-client-commons/docs/helpers/phoneNumber.json"
  },
  "summary": {
    "purpose": "Phone number validation and formatting utilities.",
    "problem_solved": "Ensures consistent phone usage (local vs international Israel format) and provides checks for valid formats."
  },
  "dependencies": {
    "external": [
      {
        "name": "libphonenumber-js",
        "kind": "runtime",
        "why_used": "International phone number parsing and validation."
      }
    ],
    "internal": []
  },
  "exports": [
    {
      "name": "isInternational",
      "kind": "function",
      "description_one_line": "Checks if a number starts with +.",
      "symbol_id": "isInternational"
    },
    {
      "name": "isInternationalIsraelPhone",
      "kind": "function",
      "description_one_line": "Checks if a number starts with +9725.",
      "symbol_id": "isInternationalIsraelPhone"
    },
    {
      "name": "local_israel_phone_format",
      "kind": "function",
      "description_one_line": "Converts +972... to 0...",
      "symbol_id": "local_israel_phone_format"
    },
    {
      "name": "international_israel_phone_format",
      "kind": "function",
      "description_one_line": "Converts 0... to +972...",
      "symbol_id": "international_israel_phone_format"
    },
    {
      "name": "get_international_phone_number",
      "kind": "function",
      "description_one_line": "Ensures number is in international format (if Israeli).",
      "symbol_id": "get_international_phone_number"
    },
    {
      "name": "displayFormatPhoneNumber",
      "kind": "function",
      "description_one_line": "Formats a number for display (e.g. 050-123-4567).",
      "symbol_id": "displayFormatPhoneNumber"
    },
    {
      "name": "is_iccid",
      "kind": "function",
      "description_one_line": "Validates if a string is a SIM card ICCID.",
      "symbol_id": "is_iccid"
    },
    {
      "name": "is_msisdn",
      "kind": "function",
      "description_one_line": "Validates if a string is an MSISDN.",
      "symbol_id": "is_msisdn"
    },
    {
      "name": "is_fixed_or_service_number",
      "kind": "function",
      "description_one_line": "Checks if a number is a landline or service number.",
      "symbol_id": "is_fixed_or_service_number"
    }
  ],
  "symbols": [
    {
      "symbol_id": "local_israel_phone_format",
      "name": "local_israel_phone_format",
      "kind": "function",
      "description_one_line": "Formats to local Israeli prefix.",
      "signature": {
        "params": [
          {
            "name": "international_number",
            "type": "string",
            "required": true,
            "description": "The number in +972 format."
          }
        ],
        "returns": {
          "type": "string",
          "description": "Number starting with 0."
        }
      },
      "details": {
        "what_it_does": "Replaces the +972 prefix with 0."
      },
      "locations": {
        "source_line_start": 14,
        "source_line_end": 16,
        "github_permalink": "https://github.com/akeyless-client-commons/blob/844185137ce1390e1c325518f954aaf0e22f09ff/src/helpers/phoneNumber.ts#L14-L16",
        "nx_kb_anchor": "local_israel_phone_format"
      },
      "examples": {
        "minimal_correct": {
          "title": "Basic usage of local_israel_phone_format",
          "code": "const result = local_israel_phone_format('+972545551234');\nconsole.log(result); // '0545551234'"
        },
        "extensive_correct": {
          "title": "Converting international format to local Israeli format",
          "code": "const international = '+972545551234';\nconst local = local_israel_phone_format(international);\nconsole.log(local); // '0545551234' - starts with 0 instead of +972"
        },
        "incorrect_pattern": {
          "title": "Common mistake: Assuming all numbers start with +972",
          "code": "// Incorrect - function expects +972 prefix\nconst result = local_israel_phone_format('0545551234'); // Returns '0545551234' (unchanged)\n// Correct approach:\nconst converted = local_israel_phone_format('+972545551234'); // '0545551234'"
        }
      }
    },
    {
      "symbol_id": "isInternational",
      "name": "isInternational",
      "kind": "function",
      "description_one_line": "Checks if a phone number is in international format by checking for + prefix.",
      "details": {
        "what_it_does": "Returns true if the phone number starts with + character, indicating international format. Returns false for local/national formats."
      },
      "locations": {
        "source_line_start": 6,
        "source_line_end": 8,
        "github_permalink": "https://github.com/akeyless/akeyless-client-commons/blob/844185137ce1390e1c325518f954aaf0e22f09ff/src/helpers/phoneNumber.ts#L6-L8",
        "nx_kb_anchor": "#isInternational"
      },
      "signature": {
        "params": [
          {
            "name": "phone_number",
            "type": "string",
            "required": true,
            "description": "The phone number to check"
          }
        ],
        "returns": {
          "type": "boolean",
          "description": "True if the number starts with +, false otherwise"
        }
      },
      "examples": {
        "minimal_correct": {
          "title": "Check if number is in international format",
          "code": "isInternational('+972545551234'); // true\nisInternational('0545551234');   // false"
        },
        "extensive_correct": {
          "title": "Using isInternational to route formatting logic",
          "code": "const phone = getUserPhoneNumber();\nif (isInternational(phone)) {\n  // Handle international format: +972...\n  sendSmsInternational(phone);\n} else {\n  // Handle local format: 054...\n  sendSmsLocal(phone);\n}"
        },
        "incorrect_pattern": {
          "title": "Common mistake: Checking for specific country code",
          "code": "// Incorrect - assumes Israeli format\nif (phone.startsWith('+972')) { /* ... */ }\n// Correct - works for any international format\nif (isInternational(phone)) { /* ... */ }"
        }
      }
    },
    {
      "symbol_id": "isInternationalIsraelPhone",
      "name": "isInternationalIsraelPhone",
      "kind": "function",
      "description_one_line": "Checks if a phone number is in Israeli international format (+9725...).",
      "details": {
        "what_it_does": "Returns true if the phone number starts with +9725, indicating an Israeli phone number in international format. Returns false for non-Israeli numbers or local formats."
      },
      "locations": {
        "source_line_start": 10,
        "source_line_end": 12,
        "github_permalink": "https://github.com/akeyless/akeyless-client-commons/blob/844185137ce1390e1c325518f954aaf0e22f09ff/src/helpers/phoneNumber.ts#L10-L12",
        "nx_kb_anchor": "#isInternationalIsraelPhone"
      },
      "signature": {
        "params": [
          {
            "name": "phone_number",
            "type": "string",
            "required": true,
            "description": "The phone number to check"
          }
        ],
        "returns": {
          "type": "boolean",
          "description": "True if the number is an Israeli international format (+9725...), false otherwise"
        }
      },
      "examples": {
        "minimal_correct": {
          "title": "Check if number is Israeli international format",
          "code": "isInternationalIsraelPhone('+972545551234'); // true\nisInternationalIsraelPhone('+14155551234'); // false (US number)\nisInternationalIsraelPhone('0545551234');   // false (local Israeli)"
        },
        "extensive_correct": {
          "title": "Routing based on Israeli vs international numbers",
          "code": "const phone = getUserPhoneNumber();\nif (isInternationalIsraelPhone(phone)) {\n  // Israeli international format\n  const localPhone = local_israel_phone_format(phone);\n  sendSmsToIsraelUser(localPhone);\n} else if (isInternational(phone)) {\n  // Foreign international format\n  sendSmsInternational(phone);\n}"
        },
        "incorrect_pattern": {
          "title": "Common mistake: Using string prefix check instead of dedicated function",
          "code": "// Incorrect - fragile and not reusable\nif (phone.startsWith('+9725')) { /* ... */ }\n// Correct - clear intent and maintainable\nif (isInternationalIsraelPhone(phone)) { /* ... */ }"
        }
      }
    },
    {
      "symbol_id": "international_israel_phone_format",
      "name": "international_israel_phone_format",
      "kind": "function",
      "description_one_line": "Converts Israeli local phone format (0...) to international format (+972...).",
      "details": {
        "what_it_does": "Takes an Israeli phone number in local format (starting with 0) and converts it to international format by replacing the leading 0 with +972 country code."
      },
      "locations": {
        "source_line_start": 18,
        "source_line_end": 21,
        "github_permalink": "https://github.com/akeyless/akeyless-client-commons/blob/844185137ce1390e1c325518f954aaf0e22f09ff/src/helpers/phoneNumber.ts#L18-L21",
        "nx_kb_anchor": "#international_israel_phone_format"
      },
      "signature": {
        "params": [
          {
            "name": "phone",
            "type": "string",
            "required": true,
            "description": "The Israeli phone number in local format (starting with 0)"
          }
        ],
        "returns": {
          "type": "string",
          "description": "The phone number in international format (+972...)"
        }
      },
      "examples": {
        "minimal_correct": {
          "title": "Convert local Israeli number to international format",
          "code": "const result = international_israel_phone_format('0545551234');\nconsole.log(result); // '+9725455551234'"
        },
        "extensive_correct": {
          "title": "Processing multiple Israeli phone numbers for API submission",
          "code": "const localPhones = ['0545551234', '0261234567', '0399887766'];\nconst internationalPhones = localPhones.map(phone => \n  international_israel_phone_format(phone)\n);\n// Result: ['+9725455551234', '+97262123456', '+97239988776']"
        },
        "incorrect_pattern": {
          "title": "Common mistake: Not checking if number is already international",
          "code": "// Incorrect - will create malformed number if already international\nconst phone = '+972545551234';\nconst result = international_israel_phone_format(phone); // '+97297245555551234' (wrong!)\n// Correct - use get_international_phone_number instead\nconst corrected = get_international_phone_number(phone); // '+972545551234' (correct)"
        }
      }
    },
    {
      "symbol_id": "get_international_phone_number",
      "name": "get_international_phone_number",
      "kind": "function",
      "description_one_line": "Ensures phone number is in international format, converting from local format if needed.",
      "details": {
        "what_it_does": "Takes any phone number format and ensures it's in international format. If the number is already international, returns it as-is. If it's in local format (starts with 0), converts it to international format (+972...). Returns '-' for empty/falsy inputs."
      },
      "locations": {
        "source_line_start": 23,
        "source_line_end": 26,
        "github_permalink": "https://github.com/akeyless/akeyless-client-commons/blob/844185137ce1390e1c325518f954aaf0e22f09ff/src/helpers/phoneNumber.ts#L23-L26",
        "nx_kb_anchor": "#get_international_phone_number"
      },
      "signature": {
        "params": [
          {
            "name": "phone",
            "type": "string",
            "required": true,
            "description": "The phone number in any format (local or international)"
          }
        ],
        "returns": {
          "type": "string",
          "description": "The phone number in international format, or '-' if input is empty"
        }
      },
      "examples": {
        "minimal_correct": {
          "title": "Normalize phone numbers to international format",
          "code": "get_international_phone_number('0545551234');    // '+9725455551234'\nget_international_phone_number('+972545551234'); // '+972545551234'\nget_international_phone_number('');              // '-'"
        },
        "extensive_correct": {
          "title": "Processing user phone input for API submission",
          "code": "const userInput = getUserPhoneInput(); // Could be local or international\nconst standardizedPhone = get_international_phone_number(userInput);\n// Safe to send to API regardless of original format\nawait api.submitPhoneNumber(standardizedPhone);"
        },
        "incorrect_pattern": {
          "title": "Common mistake: Assuming consistent input format",
          "code": "// Incorrect - assumes local format always\nconst phone = local_israel_phone_format(userInput); // Fails if already international\n// Correct - handles both formats\nconst phone = get_international_phone_number(userInput); // Always works"
        }
      }
    },
    {
      "symbol_id": "displayFormatPhoneNumber",
      "name": "displayFormatPhoneNumber",
      "kind": "function",
      "description_one_line": "Formats phone numbers for user-friendly display with proper grouping and separators.",
      "details": {
        "what_it_does": "Formats phone numbers into readable display format with separators. Handles international formats using libphonenumber-js parsing. For local Israeli numbers, applies smart formatting based on number type (landline, VoIP, service). Supports custom separators (default: '-'). Returns empty string for falsy inputs."
      },
      "locations": {
        "source_line_start": 28,
        "source_line_end": 56,
        "github_permalink": "https://github.com/akeyless/akeyless-client-commons/blob/844185137ce1390e1c325518f954aaf0e22f09ff/src/helpers/phoneNumber.ts#L28-L56",
        "nx_kb_anchor": "#displayFormatPhoneNumber"
      },
      "signature": {
        "params": [
          {
            "name": "phoneNumber",
            "type": "string",
            "required": true,
            "description": "The phone number to format"
          },
          {
            "name": "separator",
            "type": "string",
            "required": false,
            "description": "The separator character to use (default: '-')"
          }
        ],
        "returns": {
          "type": "string",
          "description": "The formatted phone number, or empty string if input is falsy"
        }
      },
      "examples": {
        "minimal_correct": {
          "title": "Format Israeli phone numbers for display",
          "code": "displayFormatPhoneNumber('0545551234');      // '054-555-1234'\ndisplayFormatPhoneNumber('0261234567');      // '02-612-3456'\ndisplayFormatPhoneNumber('+972545551234');   // '+972 54 555 1234'"
        },
        "extensive_correct": {
          "title": "Using custom separators and handling various phone types",
          "code": "// Mobile phone with dash separator\ndisplayFormatPhoneNumber('0501234567', '-'); // '050-123-4567'\n// Landline with space separator\ndisplayFormatPhoneNumber('0291234567', ' '); // '02 912 3456'\n// Service number\ndisplayFormatPhoneNumber('1700123456', '-'); // '1700-123-456'\n// International format\ndisplayFormatPhoneNumber('+972501234567', ' '); // '+972 50 123 4567'"
        },
        "incorrect_pattern": {
          "title": "Common mistake: Not handling whitespace in input",
          \"code\": \"// Incorrect - fails with pre-formatted input\nconst phone = '054 555 1234';\ndisplayFormatPhoneNumber(phone); // '054555123' (loses separators)\n// Correct - function cleans input first\nconst phone = '054 555 1234';\nconst result = displayFormatPhoneNumber(phone); // '054-555-1234' (reformatted)\""
        }
      }
    },
    {
      "symbol_id": "is_iccid",
      "name": "is_iccid",
      "kind": "function",
      "description_one_line": "Validates if a string is a valid SIM card ICCID (Integrated Circuit Card Identifier).",
      "details": {
        "what_it_does": "Validates SIM card ICCID numbers by checking: length (19-22 digits), format (all numeric), and prefix (must start with '89'). ICCIDs identify individual SIM cards globally."
      },
      "locations": {
        "source_line_start": 58,
        "source_line_end": 63,
        "github_permalink": "https://github.com/akeyless/akeyless-client-commons/blob/844185137ce1390e1c325518f954aaf0e22f09ff/src/helpers/phoneNumber.ts#L58-L63",
        "nx_kb_anchor": "#is_iccid"
      },
      "signature": {
        "params": [
          {
            "name": "number",
            "type": "string",
            "required": true,
            "description": "The string to validate as ICCID"
          }
        ],
        "returns": {
          "type": "boolean",
          "description": "True if the string is a valid ICCID, false otherwise"
        }
      },
      "examples": {
        "minimal_correct": {
          "title": "Validate SIM card ICCID",
          "code": "is_iccid('89314404000000000000001'); // true\nis_iccid('12345678901234567890');      // false (doesn't start with 89)\nis_iccid('89314404');                  // false (too short)"
        },
        "extensive_correct": {
          "title": "Validating SIM card data in inventory system",
          "code": "function registerSimCard(iccid: string) {\n  if (!is_iccid(iccid)) {\n    throw new Error('Invalid ICCID format');\n  }\n  // Store in database\n  database.simCards.insert({ iccid, activated_at: new Date() });\n}"
        },
        "incorrect_pattern": {
          "title": "Common mistake: Not validating ICCID before processing",
          "code": "// Incorrect - accepts any 19+ digit string\nif (iccid.length >= 19 && /^\\d+$/.test(iccid)) { /* ... */ }\n// Correct - properly validates ICCID format\nif (is_iccid(iccid)) { /* ... */ }"
        }
      }
    },
    {
      "symbol_id": "is_msisdn",
      "name": "is_msisdn",
      "kind": "function",
      "description_one_line": "Validates if a string is a valid MSISDN (Mobile Station Integrated Services Digital Network number).",
      "details": {
        "what_it_does": "Validates MSISDN (phone number) by checking: length (10-15 digits, typical international standard), format (all numeric digits only). MSISDN is the global standard format for mobile phone numbers."
      },
      "locations": {
        "source_line_start": 65,
        "source_line_end": 69,
        "github_permalink": "https://github.com/akeyless/akeyless-client-commons/blob/844185137ce1390e1c325518f954aaf0e22f09ff/src/helpers/phoneNumber.ts#L65-L69",
        "nx_kb_anchor": "#is_msisdn"
      },
      "signature": {
        "params": [
          {
            "name": "number",
            "type": "string",
            "required": true,
            "description": "The string to validate as MSISDN"
          }
        ],
        "returns": {
          "type": "boolean",
          "description": "True if the string is a valid MSISDN, false otherwise"
        }
      },
      "examples": {
        "minimal_correct": {
          "title": "Validate phone numbers as MSISDN format",
          "code": "is_msisdn('972545551234');     // true (10 digits, numeric)\nis_msisdn('14155552671');       // true (10 digits, numeric)\nis_msisdn('123');               // false (too short)\nis_msisdn('9725455512341234'); // false (too long)"
        },
        "extensive_correct": {
          "title": "Validating phone numbers before SMS API calls",
          "code": "async function sendSms(msisdn: string, message: string) {\n  if (!is_msisdn(msisdn)) {\n    throw new Error('Invalid phone number format');\n  }\n  // Safe to send to SMS API\n  return await smsGateway.send(msisdn, message);\n}"
        },
        "incorrect_pattern": {
          "title": "Common mistake: Not validating MSISDN length requirements",
          "code": "// Incorrect - only checks numeric format\nif (/^\\d+$/.test(number)) { /* ... */ }\n// Correct - validates both format and length\nif (is_msisdn(number)) { /* ... */ }"
        }
      }
    },
    {
      "symbol_id": "is_fixed_or_service_number",
      "name": "is_fixed_or_service_number",
      "kind": "function",
      "description_one_line": "Checks if a phone number is a landline, VoIP, or service number (not a mobile).",
      "details": {
        "what_it_does": "Validates if a number is a non-mobile phone number by checking: format (numeric digits and spaces/dashes only), length (7-15 digits), and prefix patterns. Identifies landline (02-09), VoIP (072-078), and service (1700, 1800, 1900, 1599, 1200, 1212) numbers. Returns false for mobile/cellular numbers and empty inputs."
      },
      "locations": {
        "source_line_start": 71,
        "source_line_end": 91,
        "github_permalink": "https://github.com/akeyless/akeyless-client-commons/blob/844185137ce1390e1c325518f954aaf0e22f09ff/src/helpers/phoneNumber.ts#L71-L91",
        "nx_kb_anchor": "#is_fixed_or_service_number"
      },
      "signature": {
        "params": [
          {
            "name": "number",
            "type": "string",
            "required": true,
            "description": "The phone number to check"
          }
        ],
        "returns": {
          "type": "boolean",
          "description": "True if the number is a landline, VoIP, or service number; false for mobile or invalid numbers"
        }
      },
      "examples": {
        "minimal_correct": {
          "title": "Check if number is landline or service",
          "code": "is_fixed_or_service_number('0261234567');  // true (landline: 02 prefix)\nis_fixed_or_service_number('0721234567');  // true (VoIP: 072 prefix)\nis_fixed_or_service_number('1700123456');  // true (service number)\nis_fixed_or_service_number('0501234567');  // false (mobile)"
        },
        "extensive_correct": {
          "title": "Routing calls based on line type",
          "code": "function routeCall(number: string) {\n  const cleaned = number.replace(/[\\s\\-]/g, '');\n  if (is_fixed_or_service_number(cleaned)) {\n    // Business/landline routing\n    return callRouter.landline(cleaned);\n  } else {\n    // Mobile routing\n    return callRouter.mobile(cleaned);\n  }\n}"
        },
        "incorrect_pattern": {
          "title": "Common mistake: Not handling whitespace and dashes in input",
          "code": "// Incorrect - fails with formatted input\nconst phone = '02-612-3456';\nif (phone.startsWith('02')) { /* ... */ } // Works but brittle\n// Correct - function handles formatting automatically\nif (is_fixed_or_service_number(phone)) { /* ... */ }"
        }
      }
    }
  ],
  "quality": {
    "generation_confidence": "high"
  }
}