{
  "repo": {
    "name": "akeyless-client-commons",
    "source_default_branch": "main"
  },
  "file_name": "global.ts",
  "source": {
    "file_path": "helpers/global.ts",
    "commit_sha": "844185137ce1390e1c325518f954aaf0e22f09ff",
    "generated_at_iso": "2026-02-15T11:42:40+02:00",
    "language": "ts",
    "framework_tags": [
      "axios",
      "firebase"
    ],
    "link_to_github": "https://github.com/akeyless-client-commons/blob/844185137ce1390e1c325518f954aaf0e22f09ff/src/helpers/global.ts",
    "link_to_nx_kb": "repos/akeyless-client-commons/docs/helpers/global.json"
  },
  "summary": {
    "purpose": "General-purpose utility functions and constants.",
    "problem_solved": "Provides common helpers for geolocation, checking environment (local/node), string formatting, and validation."
  },
  "dependencies": {
    "external": [
      {
        "name": "akeyless-types-commons",
        "kind": "dev",
        "why_used": "Type definitions."
      },
      {
        "name": "axios",
        "kind": "runtime",
        "why_used": "HTTP client for geocoding."
      },
      {
        "name": "lodash",
        "kind": "runtime",
        "why_used": "Utility functions (isEmpty, isEqual)."
      }
    ],
    "internal": [
      {
        "import_path": "./firebase",
        "resolved_file_path": "helpers/firebase.ts",
        "why_used": "Firebase utilities (query_document, snapshot).",
        "link_to_nx_kb": "repos/akeyless-client-commons/docs/helpers/firebase.json",
        "link_to_github": "https://github.com/akeyless-client-commons/blob/master/src/helpers/firebase.ts"
      },
      {
        "import_path": "./phoneNumber",
        "resolved_file_path": "helpers/phoneNumber.ts",
        "why_used": "Phone number formatting utility.",
        "link_to_nx_kb": "repos/akeyless-client-commons/docs/helpers/phoneNumber.json",
        "link_to_github": "https://github.com/akeyless-client-commons/blob/master/src/helpers/phoneNumber.ts"
      },
      {
        "import_path": "types",
        "resolved_file_path": "types/index.ts",
        "why_used": "Helper types (WhereCondition).",
        "link_to_nx_kb": "repos/akeyless-client-commons/docs/types/index.json",
        "link_to_github": "https://github.com/akeyless-client-commons/blob/master/src/types/index.ts"
      }
    ]
  },
  "exports": [
    {
      "name": "calculateBearing",
      "kind": "function",
      "description_one_line": "Calculates the bearing between two geographic coordinates.",
      "symbol_id": "calculateBearing"
    },
    {
      "name": "renderOnce",
      "kind": "function",
      "description_one_line": "Returns true (used for memoization or render control).",
      "symbol_id": "renderOnce"
    },
    {
      "name": "propsAreEqual",
      "kind": "function",
      "description_one_line": "Deep comparison of two props objects using lodash isEqual.",
      "symbol_id": "propsAreEqual"
    },
    {
      "name": "getUserCountryByIp",
      "kind": "function",
      "description_one_line": "Fetches the user's country based on IP.",
      "symbol_id": "getUserCountryByIp"
    },
    {
      "name": "userNameFormat",
      "kind": "function",
      "description_one_line": "Formats a user's full name.",
      "symbol_id": "userNameFormat"
    },
    {
      "name": "multiStringFormat",
      "kind": "function",
      "description_one_line": "Joins multiple strings with spaces.",
      "symbol_id": "multiStringFormat"
    },
    {
      "name": "getLocationUrl",
      "kind": "function",
      "description_one_line": "Generates a Google Maps URL for given coordinates.",
      "symbol_id": "getLocationUrl"
    },
    {
      "name": "isNodeEnv",
      "kind": "constant",
      "description_one_line": "Boolean indicating if running in a Node.js environment.",
      "symbol_id": "isNodeEnv"
    },
    {
      "name": "mode",
      "kind": "constant",
      "description_one_line": "Application mode (e.g., qa, prod).",
      "symbol_id": "mode"
    },
    {
      "name": "isLocal",
      "kind": "constant",
      "description_one_line": "Boolean indicating if running locally.",
      "symbol_id": "isLocal"
    },
    {
      "name": "getFixedNumber",
      "kind": "function",
      "description_one_line": "Formats a number to a fixed decimal string, removing trailing zeros.",
      "symbol_id": "getFixedNumber"
    },
    {
      "name": "getAddressByGeo",
      "kind": "function",
      "description_one_line": "Reverse geocodes coordinates to an address using Google Maps API.",
      "symbol_id": "getAddressByGeo"
    },
    {
      "name": "validateAndCast",
      "kind": "function",
      "description_one_line": "Type predicate helper function.",
      "symbol_id": "validateAndCast"
    }
  ],
  "symbols": [
    {
      "symbol_id": "calculateBearing",
      "name": "calculateBearing",
      "kind": "function",
      "description_one_line": "Calculates bearing in degrees.",
      "signature": {
        "params": [
          {
            "name": "startLat",
            "type": "number",
            "required": true,
            "description": "Start latitude"
          },
          {
            "name": "startLng",
            "type": "number",
            "required": true,
            "description": "Start longitude"
          },
          {
            "name": "endLat",
            "type": "number",
            "required": true,
            "description": "End latitude"
          },
          {
            "name": "endLng",
            "type": "number",
            "required": true,
            "description": "End longitude"
          }
        ],
        "returns": {
          "type": "number",
          "description": "Bearing in degrees (0-360)."
        }
      },
      "details": {
        "what_it_does": "Computes the initial bearing (forward azimuth) from the starting point to the destination point."
      },
      "locations": {
        "source_line_start": 8,
        "source_line_end": 26,
        "github_permalink": "https://github.com/akeyless-client-commons/blob/844185137ce1390e1c325518f954aaf0e22f09ff/src/helpers/global.ts#L8-L26",
        "nx_kb_anchor": "calculateBearing"
      },
      "examples": {
        "minimal_correct": {
          "title": "Calculate bearing between two locations",
          "code": "const bearing = calculateBearing(40.7128, -74.0060, 51.5074, -0.1278); // NYC to London\nconsole.log(bearing); // ~51 degrees"
        },
        "extensive_correct": {
          "title": "Navigation bearing calculation",
          "code": "const userLat = 40.7128, userLng = -74.0060; // NYC\nconst destLat = 51.5074, destLng = -0.1278; // London\nconst bearing = calculateBearing(userLat, userLng, destLat, destLng);\n\nfunction getDirection(bearing: number): string {\n  if (bearing < 45 || bearing >= 315) return 'North';\n  if (bearing < 135) return 'East';\n  if (bearing < 225) return 'South';\n  return 'West';\n}\n\nconsole.log(`Head ${getDirection(bearing)} to reach destination`);"
        }
      }
    },
    {
      "symbol_id": "getUserCountryByIp",
      "name": "getUserCountryByIp",
      "kind": "function",
      "description_one_line": "Determines user country from IP.",
      "signature": {
        "params": [],
        "returns": {
          "type": "Promise<CountryOptions>",
          "description": "The country code (e.g. 'il' or 'en')."
        }
      },
      "details": {
        "what_it_does": "Calls 'https://ipapi.co/json/' to get the country code. Defaults to 'IL' on error."
      },
      "locations": {
        "source_line_start": 36,
        "source_line_end": 45,
        "github_permalink": "https://github.com/akeyless-client-commons/blob/844185137ce1390e1c325518f954aaf0e22f09ff/src/helpers/global.ts#L36-L45",
        "nx_kb_anchor": "getUserCountryByIp"
      },
      "examples": {
        "minimal_correct": {
          "title": "Get user country from IP",
          "code": "const country = await getUserCountryByIp();\nconsole.log(country); // 'il' or 'us' etc."
        },
        "extensive_correct": {
          "title": "Set app language based on country",
          "code": "const country = await getUserCountryByIp();\nconst language = country === 'il' ? LanguageOptions.He : LanguageOptions.En;\nsetAppLanguage(language);"
        }
      }
    },
    {
      "symbol_id": "renderOnce",
      "name": "renderOnce",
      "kind": "function",
      "description_one_line": "Returns true (used for memoization or render control).",
      "details": {
        "what_it_does": "Returns true (used for memoization or render control)."
      },
      "locations": {
        "source_line_start": 0,
        "source_line_end": 0,
        "github_permalink": "",
        "nx_kb_anchor": "#renderOnce"
      },
      "signature": {
        "params": [],
        "returns": {
          "type": "void",
          "description": ""
        }
      },
      "examples": {
        "minimal_correct": {
          "title": "Using in React.memo",
          "code": "export default React.memo(MyComponent, renderOnce);"
        },
        "extensive_correct": {
          "title": "Memoization with custom comparator",
          "code": "const MemoizedComponent = React.memo(\n  MyComponent,\n  (prevProps, nextProps) => renderOnce()\n);"
        },
        "incorrect_pattern": {
          "title": "Common mistake: Not using with React.memo",
          "code": "// Incorrect - function does nothing without React.memo\nconst result = renderOnce(); // Just returns true\n// Correct - use with React.memo\nconst Memoized = React.memo(Component, renderOnce);"
        }
      }
    },
    {
      "symbol_id": "propsAreEqual",
      "name": "propsAreEqual",
      "kind": "function",
      "description_one_line": "Deep comparison of two props objects using lodash isEqual.",
      "details": {
        "what_it_does": "Deep comparison of two props objects using lodash isEqual."
      },
      "locations": {
        "source_line_start": 0,
        "source_line_end": 0,
        "github_permalink": "",
        "nx_kb_anchor": "#propsAreEqual"
      },
      "signature": {
        "params": [],
        "returns": {
          "type": "void",
          "description": ""
        }
      },
      "examples": {
        "minimal_correct": {
          "title": "Checking if props changed",
          "code": "const prevProps = { name: 'John', age: 30 };\nconst nextProps = { name: 'John', age: 30 };\nconst isEqual = propsAreEqual(prevProps, nextProps); // true"
        },
        "extensive_correct": {
          "title": "Deep equality for nested objects",
          "code": "const prevProps = { user: { id: 1, name: 'John' }, settings: { dark: true } };\nconst nextProps = { user: { id: 1, name: 'John' }, settings: { dark: true } };\nconst equal = propsAreEqual(prevProps, nextProps); // true (deep comparison)"
        },
        "incorrect_pattern": {
          "title": "Common mistake: Using === instead of deep comparison",
          "code": "// Incorrect - shallow comparison fails\nconst obj1 = { value: 1 };\nconst obj2 = { value: 1 };\nconsole.log(obj1 === obj2); // false\n// Correct - use propsAreEqual for deep comparison\nconsole.log(propsAreEqual(obj1, obj2)); // true"
        }
      }
    },
    {
      "symbol_id": "userNameFormat",
      "name": "userNameFormat",
      "kind": "function",
      "description_one_line": "Formats a user's full name.",
      "details": {
        "what_it_does": "Formats a user's full name."
      },
      "locations": {
        "source_line_start": 0,
        "source_line_end": 0,
        "github_permalink": "",
        "nx_kb_anchor": "#userNameFormat"
      },
      "signature": {
        "params": [],
        "returns": {
          "type": "void",
          "description": ""
        }
      },
      "examples": {
        "minimal_correct": {
          "title": "Formatting user name",
          "code": "const user = { first_name: 'John', last_name: 'Doe' };\nconst name = userNameFormat(user); // 'John Doe'"
        },
        "extensive_correct": {
          "title": "Handling missing names",
          "code": "const fullUser = { first_name: 'Jane', last_name: 'Smith' };\nconst noLastName = { first_name: 'Bob' };\nconst noFirstName = { last_name: 'Johnson' };\nconst noNames = {};\n\nconsole.log(userNameFormat(fullUser)); // 'Jane Smith'\nconsole.log(userNameFormat(noLastName)); // 'Bob'\nconsole.log(userNameFormat(noFirstName)); // 'Johnson'\nconsole.log(userNameFormat(noNames)); // ''"
        },
        "incorrect_pattern": {
          "title": "Common mistake: Assuming properties always exist",
          "code": "// Incorrect - will include undefined\nconst name = `${user.first_name} ${user.last_name}`; // 'John undefined'\n// Correct - handles missing properties\nconst name = userNameFormat(user); // 'John Doe' or just 'John'"
        }
      }
    },
    {
      "symbol_id": "multiStringFormat",
      "name": "multiStringFormat",
      "kind": "function",
      "description_one_line": "Joins multiple strings with spaces.",
      "details": {
        "what_it_does": "Joins multiple strings with spaces."
      },
      "locations": {
        "source_line_start": 0,
        "source_line_end": 0,
        "github_permalink": "",
        "nx_kb_anchor": "#multiStringFormat"
      },
      "signature": {
        "params": [],
        "returns": {
          "type": "void",
          "description": ""
        }
      },
      "examples": {
        "minimal_correct": {
          "title": "Joining multiple strings",
          "code": "const result = multiStringFormat('Hello', 'World'); // 'Hello World'"
        },
        "extensive_correct": {
          "title": "Joining with optional parameters",
          "code": "console.log(multiStringFormat('A', 'B', 'C'));        // 'A B C'\nconsole.log(multiStringFormat('A', 'B'));           // 'A B'\nconsole.log(multiStringFormat('A', undefined, 'C')); // 'A C'\nconsole.log(multiStringFormat('A'));                  // 'A'"
        },
        "incorrect_pattern": {
          "title": "Common mistake: Not trimming whitespace",
          "code": "// Incorrect - extra spaces\nconst name = `${str1} ${str2 || ''}`; // 'Hello '\n// Correct - trims automatically\nconst name = multiStringFormat(str1, str2); // 'Hello'"
        }
      }
    },
    {
      "symbol_id": "getLocationUrl",
      "name": "getLocationUrl",
      "kind": "function",
      "description_one_line": "Generates a Google Maps URL for given coordinates.",
      "details": {
        "what_it_does": "Generates a Google Maps URL for given coordinates."
      },
      "locations": {
        "source_line_start": 0,
        "source_line_end": 0,
        "github_permalink": "",
        "nx_kb_anchor": "#getLocationUrl"
      },
      "signature": {
        "params": [],
        "returns": {
          "type": "void",
          "description": ""
        }
      },
      "examples": {
        "minimal_correct": {
          "title": "Getting Google Maps URL",
          "code": "const url = getLocationUrl(-74.0060, 40.7128); // NYC (lng, lat)\n// 'https://www.google.com/maps?q=40.7128,-74.0060'"
        },
        "extensive_correct": {
          "title": "Creating location links",
          "code": "const locations = [\n  { name: 'NYC', lat: 40.7128, lng: -74.0060 },\n  { name: 'London', lat: 51.5074, lng: -0.1278 }\n];\nconst links = locations.map(loc => \n  `<a href=\"${getLocationUrl(loc.lng, loc.lat)}\" target=\"_blank\">${loc.name}</a>`\n);"
        },
        "incorrect_pattern": {
          "title": "Common mistake: Wrong parameter order",
          "code": "// Incorrect - (lat, lng) order\nconst url = getLocationUrl(40.7128, -74.0060);\n// Correct - (lng, lat) order\nconst url = getLocationUrl(-74.0060, 40.7128);"
        }
      }
    },
    {
      "symbol_id": "isNodeEnv",
      "name": "isNodeEnv",
      "kind": "constant",
      "description_one_line": "Boolean indicating if running in a Node.js environment.",
      "details": {
        "what_it_does": "Boolean indicating if running in a Node.js environment."
      },
      "locations": {
        "source_line_start": 0,
        "source_line_end": 0,
        "github_permalink": "",
        "nx_kb_anchor": "#isNodeEnv"
      }
    },
    {
      "symbol_id": "mode",
      "name": "mode",
      "kind": "constant",
      "description_one_line": "Application mode (e.g., qa, prod).",
      "details": {
        "what_it_does": "Application mode (e.g., qa, prod)."
      },
      "locations": {
        "source_line_start": 0,
        "source_line_end": 0,
        "github_permalink": "",
        "nx_kb_anchor": "#mode"
      }
    },
    {
      "symbol_id": "isLocal",
      "name": "isLocal",
      "kind": "constant",
      "description_one_line": "Boolean indicating if running locally.",
      "details": {
        "what_it_does": "Boolean indicating if running locally."
      },
      "locations": {
        "source_line_start": 0,
        "source_line_end": 0,
        "github_permalink": "",
        "nx_kb_anchor": "#isLocal"
      }
    },
    {
      "symbol_id": "getFixedNumber",
      "name": "getFixedNumber",
      "kind": "function",
      "description_one_line": "Formats a number to a fixed decimal string, removing trailing zeros.",
      "details": {
        "what_it_does": "Formats a number to a fixed decimal string, removing trailing zeros."
      },
      "locations": {
        "source_line_start": 0,
        "source_line_end": 0,
        "github_permalink": "",
        "nx_kb_anchor": "#getFixedNumber"
      },
      "signature": {
        "params": [],
        "returns": {
          "type": "void",
          "description": ""
        }
      },
      "examples": {
        "minimal_correct": {
          "title": "Formatting numbers with decimals",
          "code": "getFixedNumber(3.14159, 2);  // '3.14'\ngetFixedNumber(10.5, 0);     // '10.5'\ngetFixedNumber(5, 2);        // '5'"
        },
        "extensive_correct": {
          "title": "Removing trailing zeros",
          "code": "getFixedNumber(10.50, 2);    // '10.5' (removes trailing zero)\ngetFixedNumber(100.100, 3);  // '100.1' (removes trailing zeros)\ngetFixedNumber(1.000, 3);    // '1' (removes all trailing zeros)"
        },
        "incorrect_pattern": {
          "title": "Common mistake: Not specifying decimal places",
          "code": "// Incorrect - defaults to 4 decimal places\ngetFixedNumber(3.14159);      // '3.1416' (4 places)\n// Correct - specify desired precision\ngetFixedNumber(3.14159, 2);   // '3.14'"
        }
      }
    },
    {
      "symbol_id": "getAddressByGeo",
      "name": "getAddressByGeo",
      "kind": "function",
      "description_one_line": "Reverse geocodes coordinates to an address using Google Maps API.",
      "details": {
        "what_it_does": "Reverse geocodes coordinates to an address using Google Maps API."
      },
      "locations": {
        "source_line_start": 0,
        "source_line_end": 0,
        "github_permalink": "",
        "nx_kb_anchor": "#getAddressByGeo"
      },
      "signature": {
        "params": [],
        "returns": {
          "type": "void",
          "description": ""
        }
      },
      "examples": {
        "minimal_correct": {
          "title": "Getting address from coordinates",
          "code": "const address = await getAddressByGeo({ lat: 40.7128, lng: -74.0060 }, 'en');\n// '350 Fifth Avenue, New York, NY 10118, USA' (up to 35 chars)"
        },
        "extensive_correct": {
          "title": "Bilingual address lookup",
          "code": "const coordinates = { lat: 31.7683, lng: 35.2137 }; // Jerusalem\nconst enAddress = await getAddressByGeo(coordinates, 'en');\nconst heAddress = await getAddressByGeo(coordinates, 'he');\nconsole.log(enAddress); // English address\nconsole.log(heAddress); // Hebrew address"
        },
        "incorrect_pattern": {
          "title": "Common mistake: Not handling API errors",
          "code": "// Incorrect - doesn't handle errors\nconst address = await getAddressByGeo({ lat: 0, lng: 0 }, 'en');\n// Correct - handle potential errors and missing API key\ntry {\n  const address = await getAddressByGeo(coords, 'en');\n} catch (error) {\n  console.error('Geocoding failed', error);\n}"
        }
      }
    },
    {
      "symbol_id": "validateAndCast",
      "name": "validateAndCast",
      "kind": "function",
      "description_one_line": "Type predicate helper function.",
      "details": {
        "what_it_does": "Type predicate helper function."
      },
      "locations": {
        "source_line_start": 0,
        "source_line_end": 0,
        "github_permalink": "",
        "nx_kb_anchor": "#validateAndCast"
      },
      "signature": {
        "params": [],
        "returns": {
          "type": "void",
          "description": ""
        }
      },
      "examples": {
        "minimal_correct": {
          "title": "Type guard validation",
          "code": "const value: unknown = 'hello';\nif (validateAndCast<string>(value, typeof value === 'string')) {\n  console.log(value.toUpperCase()); // TypeScript knows it's a string\n}"
        },
        "extensive_correct": {
          "title": "Conditional type narrowing",
          "code": "function processValue(value: unknown) {\n  if (validateAndCast<number>(value, typeof value === 'number')) {\n    console.log(value * 2); // Treated as number\n    return value * 2;\n  }\n  if (validateAndCast<string>(value, typeof value === 'string')) {\n    console.log(value.length); // Treated as string\n    return value.length;\n  }\n}"
        },
        "incorrect_pattern": {
          "title": "Common mistake: Not using as type guard",
          "code": "// Incorrect - condition not properly checked\nif (value as string) { } // Forces type, doesn't validate\n// Correct - validates condition\nif (validateAndCast<string>(value, typeof value === 'string')) { }"
        }
      }
    }
  ],
  "quality": {
    "generation_confidence": "high"
  }
}