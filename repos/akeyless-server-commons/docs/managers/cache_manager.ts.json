{
  "repo": {
    "name": "akeyless-server-commons",
    "source_default_branch": "main"
  },
  "file_name": "cache_manager.ts",
  "source": {
    "file_path": "managers/cache_manager.ts",
    "commit_sha": "39596d3",
    "generated_at_iso": "2026-02-22T00:00:00.000Z",
    "language": "ts",
    "framework_tags": ["node"],
    "link_to_github": "https://github.com/akeylesspro/akeyless-server-commons/blob/39596d3/src/managers/cache_manager.ts",
    "link_to_nx_kb": "/repos/akeyless-server-commons/docs/managers/cache_manager.ts.json"
  },
  "summary": {
    "purpose": "Implements a singleton in-memory cache manager that stores and retrieves data as either typed arrays or keyed objects.",
    "problem_solved": "Provides a centralised, type-safe in-memory cache for Firestore and Redis snapshot data, avoiding repeated database reads and enabling fast synchronous data access across the application."
  },
  "dependencies": {
    "external": [
      {
        "name": "akeyless-types-commons",
        "kind": "runtime",
        "why_used": "Provides the TObject generic type used in cache storage."
      }
    ],
    "internal": []
  },
  "exports": [
    {
      "name": "CacheManager",
      "kind": "class",
      "description_one_line": "Singleton class for in-memory caching of array and object data.",
      "symbol_id": "CacheManager"
    },
    {
      "name": "cache_manager",
      "kind": "value",
      "description_one_line": "The singleton CacheManager instance, also available globally as global.cache_manager.",
      "symbol_id": "cache_manager_instance"
    }
  ],
  "symbols": [
    {
      "symbol_id": "CacheManager",
      "name": "CacheManager",
      "kind": "class",
      "description_one_line": "Singleton class for in-memory caching of array and object data.",
      "details": {
        "what_it_does": "Maintains two internal Maps: one for array data (e.g., Firestore collection arrays) and one for object data (e.g., keyed Firestore documents). Provides typed getters and setters for both. Exposed as a global singleton via global.cache_manager.",
        "methods": [
          {"name": "setArrayData", "description": "Stores an array under a given key."},
          {"name": "getArrayData", "description": "Retrieves an array by key, returning an empty array if not found."},
          {"name": "setObjectData", "description": "Stores a keyed object under a given key."},
          {"name": "getObjectData", "description": "Retrieves a keyed object by key, returning an empty object if not found."}
        ]
      },
      "examples": {
        "minimal_correct": {
          "title": "Store and retrieve array data",
          "code": "cache_manager.setArrayData('devices', devicesArray);\nconst devices = cache_manager.getArrayData<Device>('devices');"
        },
        "extensive_correct": {
          "title": "Store and retrieve object data",
          "code": "cache_manager.setObjectData('settings', { emails: emailSettings, sms: smsSettings });\nconst settings = cache_manager.getObjectData<Settings>('settings');"
        }
      },
      "locations": {
        "source_line_start": 3,
        "source_line_end": 38,
        "github_permalink": "https://github.com/akeylesspro/akeyless-server-commons/blob/39596d3/src/managers/cache_manager.ts#L3",
        "nx_kb_anchor": "CacheManager"
      }
    },
    {
      "symbol_id": "cache_manager_instance",
      "name": "cache_manager",
      "kind": "value",
      "description_one_line": "The singleton CacheManager instance, also available globally as global.cache_manager.",
      "details": {
        "what_it_does": "Creates the singleton CacheManager instance and assigns it to global.cache_manager for access without imports in legacy code. This is the primary way to interact with the in-memory cache throughout the application."
      },
      "examples": {
        "minimal_correct": {
          "title": "Import and use cache_manager",
          "code": "import { cache_manager } from '../managers';\nconst devices = cache_manager.getArrayData('devices');"
        }
      },
      "locations": {
        "source_line_start": 40,
        "source_line_end": 41,
        "github_permalink": "https://github.com/akeylesspro/akeyless-server-commons/blob/39596d3/src/managers/cache_manager.ts#L40",
        "nx_kb_anchor": "cache_manager_instance"
      }
    }
  ],
  "quality": {
    "generation_confidence": "high",
    "known_gaps": []
  }
}
